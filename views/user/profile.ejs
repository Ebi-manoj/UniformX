<div class="bg-white min-h-screen flex relative">
    <!-- Sidebar Navigation -->
    <%- include('../partials/profile_sidebar') %> 
    <!-- Main Content -->
    <main id="profile" class=" flex flex-1 ml-64 py-0 px-6 items-center justify-center">
        <div class="w-full bg-white rounded-xl shadow-lg overflow-hidden">
            <!-- Header with profile image -->
            <div class="relative h-32 bg-cyan-50">
                <div class="absolute -bottom-12 left-1/2 transform -translate-x-1/2">
                    <div class="relative">
                        <img
                            src="images/messi.png"
                            alt="Profile"
                            class="w-24 h-24 rounded-full border-2 border-gray-700 object-cover"
                        />
                        <div class="absolute bottom-0 right-0 bg-white p-1 rounded-full shadow-md">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="h-5 w-5 text-gray-700"
                                viewBox="0 0 20 20"
                                fill="currentColor"
                            >
                                <path
                                    d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"
                                />
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
    
            <!-- Profile details -->
            <div class="pt-16 pb-8 px-6">
                <h1 class="text-2xl font-bold text-center text-gray-900 mb-1">
                   <%= user.full_name %>
                </h1>
                <p class="text-gray-500 text-center mb-6">Member since <%= new Date(user.createdAt).getFullYear() %></p>
    
                <div class="space-y-4">
                    <!-- Full Name -->
                    <div class="flex items-center p-3 bg-gray-50 rounded-lg">
                        <div class="p-2 bg-gray-200 rounded-lg mr-4">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="h-5 w-5 text-gray-700"
                                viewBox="0 0 20 20"
                                fill="currentColor"
                            >
                                <path
                                    fill-rule="evenodd"
                                    d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"
                                    clip-rule="evenodd"
                                />
                            </svg>
                        </div>
                        <div>
                            <p class="text-xs text-gray-500">Full Name</p>
                            <p class="font-medium"><%= user.full_name %></p>
                        </div>
                    </div>
    
                    <!-- Email -->
                    <div class="flex items-center p-3 bg-gray-50 rounded-lg">
                        <div class="p-2 bg-gray-200 rounded-lg mr-4">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="h-5 w-5 text-gray-700"
                                viewBox="0 0 20 20"
                                fill="currentColor"
                            >
                                <path
                                    d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"
                                />
                                <path
                                    d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"
                                />
                            </svg>
                        </div>
                        <div>
                            <p class="text-xs text-gray-500">Email</p>
                            <p class="font-medium"><%= user.email %></p>
                        </div>
                    </div>
    
                    <!-- Phone -->
                    <div class="flex items-center p-3 bg-gray-50 rounded-lg">
                        <div class="p-2 bg-gray-200 rounded-lg mr-4">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="h-5 w-5 text-gray-700"
                                viewBox="0 0 20 20"
                                fill="currentColor"
                            >
                                <path
                                    d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"
                                />
                            </svg>
                        </div>
                        <div>
                            <p class="text-xs text-gray-500">Phone</p>
                            <p class="font-medium"><%= user.phone %></p>
                        </div>
                    </div>
    
                    <!-- Address -->
                    <div class="flex items-center p-3 bg-gray-50 rounded-lg">
                        <div class="p-2 bg-gray-200 rounded-lg mr-4">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="h-5 w-5 text-gray-700"
                                viewBox="0 0 20 20"
                                fill="currentColor"
                            >
                                <path
                                    fill-rule="evenodd"
                                    d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z"
                                    clip-rule="evenodd"
                                />
                            </svg>
                        </div>
                        <div>
                            <% if (defaultAddress) { %>
                                <p class="text-xs text-gray-500">Address</p>
                                <p class="font-medium"><%= defaultAddress.street_address %>, <%= defaultAddress.name %></p>
                                <p class="text-sm text-gray-500"><%= defaultAddress.district %>, <%= defaultAddress.state %> <%= defaultAddress.pincode %></p>
                              <% } else { %>
                                <p class="text-xs text-gray-500">No default address set.</p>
                              <% } %>
                              
                        </div>
                    </div>
                </div>
    
                <!-- Edit button -->
                <div class="mt-8 flex justify-center">
                    <button
                        id="btn-edit-profile"
                        class="px-6 py-2 bg-gray-900 text-white rounded-lg flex items-center hover:bg-gray-800 transition-colors"
                    >
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            class="h-5 w-5 mr-2"
                            viewBox="0 0 20 20"
                            fill="currentColor"
                        >
                            <path
                                d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"
                            />
                        </svg>
                        Edit Profile
                    </button>
                </div>
            </div>
        </div>
    </main>
</div>

 <!-- Edit Profile Modal -->
<div id="editProfileModal" class="fixed inset-0 bg-gray-300 bg-opacity-50 flex items-center justify-center hidden">
    <div class="bg-gray-900 text-white rounded-2xl shadow-2xl w-full max-w-lg p-6 relative animate-fadeIn">
        <!-- Close Button -->
        <button id="btn-close" class="absolute top-3 right-3 text-gray-400 hover:text-white">
            <span class="material-icons text-2xl">x</span>
        </button>

        <!-- Modal Header -->
        <h2 class="text-2xl font-semibold flex items-center mb-6">
            <i class="fa-solid fa-pen-to-square"></i> Edit Profile
        </h2>

        <!-- Full Name -->
        <div class="mb-4">
            <label class="block text-sm font-medium text-gray-300">Full Name</label>
            <div class="relative">
                <i class="fa-solid fa-user  absolute left-3 top-3"></i>
                <input type="text" id="fullName" class="w-full border border-gray-600 rounded-lg bg-gray-800 text-white p-2 pl-10" value="<%= user.full_name %>">
            </div>
        </div>

        <!-- Email -->
        <div class="mb-4">
            <label class="block text-sm font-medium text-gray-300">Email</label>
            <div class="relative">
                <i class="fa-solid fa-envelope absolute left-3 top-3"></i>
                <input type="email" id="email" class="w-full border border-gray-600 rounded-lg bg-gray-800 text-white p-2 pl-10" value="<%= user.email %>">
            </div>
        </div>

        <!-- Mobile -->
        <div class="mb-4">
            <label class="block text-sm font-medium text-gray-300">Mobile</label>
            <div class="relative">
                <i class="fa-solid fa-phone absolute left-3 top-3"></i>
                <input type="text" id="mobile" class="w-full border border-gray-600 rounded-lg bg-gray-800 text-white p-2 pl-10" value="<%= user.phone %>">
            </div>
        </div>

        <!-- Address -->
        <div class="mb-4">
            <label class="block text-sm font-medium text-gray-300">Address</label>
            <input type="hidden" id="allAddresses" value='<%- JSON.stringify(addresses) %>'>
            <div class="flex items-center gap-2">
                <div class="relative pl-10 border border-gray-600 rounded-lg p-2 flex-1 bg-gray-800 text-gray-300 flex items-center">
                    <i class="fa-solid fa-location-dot absolute left-3 top-3"></i>
                    <span id="addressSpan"><%= addresses.length ? addresses.length : "No Address set" %></span>
                </div>
                <select id="addressSelect" class="border border-gray-600 rounded-lg bg-gray-800 text-white p-2">
                    <% addresses.forEach((address,index) => { %>
                        <option value="<%= index %>"><%= address.name %></option>
                    <% }) %>
                    <option value="add_new">+ Add New Address</option>
                </select>
            </div>
        </div>
       

        <!-- Buttons -->
        <div class="flex justify-end mt-6">
            <button id="cancel-btn" class="px-4 py-2 border border-cyan-100 text-white rounded-lg mr-2 hover:bg-gray-600 transition">Cancel</button>
            <button id="save-btn" class="px-4 py-2 bg-white text-black rounded-lg hover:bg-gray-0 transition">Save</button>
        </div>
    </div>
</div>